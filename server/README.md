# Сервер моковых данных json-server

## С чего начать

Json-server проекта доступен на 3001 порту. 
Для запуска локально нужно совершить буквально пару шагов.

1. Установить зависимости json-server и concurrently командой:
npm i 
или
npm ci

2. Запустить проект командой:
npm run dev
Скрипт будем запускать через concurrently, он запустит сразу и проект, и сервер, и сторибук, не занимая при этом три терминала.

## Как поменять моковые данные для конкретного эндпоинта

- В папке server в корне проекта лежит файл db.json, который содержит в себе структуру эндпоинтов мокового сервера. 
- При запуске сервера командой npm run server, терминал покажет адреса, доступные для запросов с фронта. Они перечислены как Resources.
- Если необходимо изменить объект, возвращаемый с сервера, при обращении к какому-либо эндпоинту, в файле db.json вы сможете отыскать ключ, совпадающим с именем нужного вам эндпоинта. Его значение - это данные, которые возвращает сервер при запросе на этот эндпоинт. Их можно поменять, чтобы протестировать нужное вам поведение приложения.

## Особенности работы с json-server

- Для описания кастомных роутов или более тонких настроек ознакомьтесь с официальной документацией: https://www.npmjs.com/package/json-server 

- При написании роутов в файле db.json нельзя использовать символ слэша "/", поэтому если необходимо создать объект данных для вложенного маршрута, его нужно назвать дргуим именем согласно примеру ниже и настроить кастомный роутинг в файле routes.json.
**Пример**: 
Вам нужно описать объект для адреса app/contacts, в этом случае имя ключа с названием эндпоинта в файле db.json нужно указать как appСontacts. Для того, чтобы данные, находящиеся по ключу appСontacts были доступны по адресу localhost:3001/app/contacts, в файле routes.json запишите настройку вида "/app/contacts": "/appСontacts".

- При работе с json-server возможно использовать поиск и фильтрацию. 
**Пример**: 
Сервер запускается на 3001 порту, в файле db.json описаны следующие данные:

```
"posts": 
[
    {
        "id": 1,
        "type": "picture",
        "name": "My vacation",
        "url": "example.url/Vacation.jpg"
    },
        {
        "id": 2,
        "type": "video",
        "name": "Sea and sand",
        "url": "example.url/sea.mov"
    },
        {
        "id": 3,
        "type": "text",
        "name": "My day",
        "url": "example.url/myday.com"
    }
] 
```

Мы можем осуществлять:
- Поиск по полному совпадению. Ищет строгое соответствие по полям объектов. 
Запрос 
localhost:3001/posts?type=text
Ответ - в ответ мы получим объект с id=3

- Поиск по неполному совпадению в любом из полей.
Запрос 
localhost:3001/posts?q=my
Ответ - в ответ мы получим поиск по всем полям объектов, и это объекты с id=1 и id=3

- Поиск по неполному совпадению в конкретном поле.
Запрос 
localhost:3001/posts?name_like=san
Ответ - в ответ мы получим нестрогое соответствие по указанному полю, и это объект с id=2

- Сортировку по полю от меньшего к большему.
Запрос 
localhost:3001/posts?_sort=name
Ответ - отсортированный по имени массив объектов.

- Сортировку по полю от большего к меньшему.
Запрос
localhost:3001/posts?_sort=name&_order=desc
Ответ - отсортированный по имени массив объектов в обратном порядке.

- Ограничение количества записей в ответе.
Запрос
localhost:3001/posts?_limit=2
Ответ - только первые 2 объекта.

Если записи еще остались, то можно получить их на следующей странице.
Запрос
localhost:3001/posts?_limit=2&_page=2
Ответ - оставшийся объект с id=3
